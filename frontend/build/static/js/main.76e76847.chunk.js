(this["webpackJsonpdeadline-app"]=this["webpackJsonpdeadline-app"]||[]).push([[0],{29:function(t,e,a){},30:function(t,e,a){},48:function(t,e,a){"use strict";a.r(e);var n=a(0),i=a(1),o=a.n(i),s=a(17),c=a.n(s),l=(a(29),a(18)),r=a(5),d=a(7),b=a(19),j=a(20),u=a(23),m=a(22);a(30);var p=function(t){var e="3",a="2",i="1",o=function(e){t.onInputChange(e)},s=function(e){return t.todoFormState.priority===e};return Object(n.jsxs)("form",{children:[Object(n.jsx)("h3",{children:"Add Deadline"}),Object(n.jsxs)("div",{className:"input-animation",children:[Object(n.jsx)("input",{onChange:o,name:"name",value:t.todoFormState.name,type:"text",required:!0}),Object(n.jsx)("label",{htmlFor:"name",className:"label-name",children:Object(n.jsx)("span",{className:"content-name",children:"Name"})})]}),Object(n.jsxs)("div",{className:"input-animation",children:[Object(n.jsx)("input",{onChange:o,name:"date",type:"date",value:t.todoFormState.date,required:!0}),Object(n.jsx)("label",{htmlFor:"date",className:"label-name",children:Object(n.jsx)("span",{className:"content-name",children:"Date"})})]}),Object(n.jsx)("div",{id:"priority",children:Object(n.jsxs)("label",{children:["Priority",Object(n.jsxs)("div",{className:"radio-container",children:[Object(n.jsx)("input",{type:"radio",id:"low",name:"priority",value:e,checked:s(e),onChange:o}),Object(n.jsx)("label",{htmlFor:"low",className:"radio",children:"Low"}),Object(n.jsx)("input",{type:"radio",id:"medium",name:"priority",value:a,checked:s(a),onChange:o}),Object(n.jsx)("label",{htmlFor:"medium",className:"radio",children:"Medium"}),Object(n.jsx)("input",{type:"radio",id:"high",name:"priority",value:i,checked:s(i),onChange:o}),Object(n.jsx)("label",{htmlFor:"high",className:"radio",children:"High"})]})]})}),Object(n.jsxs)("div",{className:"input-animation",children:[Object(n.jsx)("input",{onChange:o,name:"list",type:"text",value:t.todoFormState.list,required:!0}),Object(n.jsx)("label",{htmlFor:"list",className:"label-name",children:Object(n.jsx)("span",{className:"content-name",children:"Task List"})})]}),Object(n.jsxs)("div",{className:"input-animation",children:[Object(n.jsx)("input",{onChange:o,name:"description",type:"text",value:t.todoFormState.description,required:!0}),Object(n.jsx)("label",{htmlFor:"description",className:"label-name",children:Object(n.jsx)("span",{className:"content-name",children:"Description"})})]}),Object(n.jsxs)("div",{className:"submitbuttons",children:[Object(n.jsx)("button",{onClick:function(e){e.preventDefault(),""!==t.todoFormState.name&&t.onFormSubmit(t.todoFormState)},id:"submit",className:"form-button",type:"submit",children:t.submitButtonLabel}),Object(n.jsx)("button",{onClick:function(e){e.preventDefault(),t.onFormCancel()},id:"cancel",className:"form-button",type:"submit",children:"Cancel"})]})]})},h=a(3),O=a(21),f=a.n(O).a.create({baseURL:"https://tamk-4a00ez62-3001-group11.herokuapp.com/api"});var x=function(t){return Object(n.jsxs)("div",{className:"collapsible",children:[Object(n.jsx)("div",{className:"collapsible-header",onClick:function(){t.onClick(t.id)},children:t.header}),Object(n.jsx)("div",{className:t.isOpen?"collapsible-content":"collapsible-content collapsed",children:t.isOpen?t.children:null})]})};function S(t){return Object(n.jsxs)("button",{id:t.id,className:t.className,onClick:t.onClick,children:[t.label,Object(n.jsx)("i",{className:t.icon})]})}var v=function(t){var e=t.todo,a=t.todoHandler,i=t.collapsibleStates;return Object(n.jsx)("li",{className:e.isdone?"todo-item completed":"todo-item",children:Object(n.jsxs)(x,{id:e.id,isOpen:i.find((function(t){return t.id===e.id})).isOpen,onClick:a.collapse,header:Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("p",{className:"todo-priority",children:e.priority}),Object(n.jsx)("p",{className:"todo-date",children:e.date}),Object(n.jsx)("p",{className:"todo-name",children:e.name}),Object(n.jsx)(S,{className:"btn-flat task-completed",onClick:function(t){t.stopPropagation(),a.complete(e.id)},icon:"fas fa-check"})]}),children:[Object(n.jsxs)("div",{className:"toolbar",children:[Object(n.jsx)("p",{children:"This needs serious work"}),Object(n.jsx)(S,{id:"edit",className:"btn py-05",onClick:function(){a.edit(e)},label:"Edit",icon:"fas fa-edit"}),Object(n.jsx)(S,{id:"delete",className:"btn py-05",onClick:function(){a.delete(e.id)},label:"Delete",icon:"fas fa-trash"})]}),Object(n.jsxs)("div",{children:[Object(n.jsx)("p",{children:"Description:"}),Object(n.jsx)("p",{className:"todo-description",children:e.description})]})]})})},N=function(t){var e=t.todos,a=t.todoHandler,i=t.collapsibleStates,o=e.map((function(t){return Object(n.jsx)(v,{todo:t,todoHandler:a,collapsibleStates:i},t.id)}));return Object(n.jsx)("div",{className:"list",children:o})},y=function(t){var e=t.todos,a=t.todoHandler,o=t.collapsibleStates,s=Object(i.useState)(null),c=Object(h.a)(s,2),l=c[0],r=c[1],d=Object(i.useState)("Fetching data..."),b=Object(h.a)(d,2),j=b[0],u=b[1],m=Object(i.useState)({}),p=Object(h.a)(m,2),O=p[0],x=p[1],S=Object(i.useState)({}),v=Object(h.a)(S,2),y=v[0],C=v[1],F=[];e.forEach((function(t){F.includes(t.list)||F.push(t.list)})),Object(i.useEffect)((function(){f.get("/lists").then((function(t){x(t)})).catch((function(t){if(!t.response)throw u("ERROR: Could not reach the API."),t;x(t.response.data)})),f.get("/todos").then((function(t){C(t)})).catch((function(t){if(!t.response)throw u("ERROR: Could not reach the API."),t;C(t.response.data)}))}),[]),Object(i.useEffect)((function(){O.hasOwnProperty("data")&&y.hasOwnProperty("data")&&(r(!0),a.fetch(O.data,y.data))}),[a,O,y]);var k=F.map((function(t){var i=e.filter((function(e){return e.list===t}));return Object(n.jsxs)("ul",{children:[Object(n.jsx)("h3",{children:t}),Object(n.jsx)(N,{todos:i,todoHandler:a,collapsibleStates:o})]},t)}));return l?Object(n.jsx)("div",{className:"list",children:k}):Object(n.jsx)("div",{className:"list",children:j})},C="Completed",F="Date",k="Name",g="Priority";function w(t){return Object(n.jsx)("button",{className:"btn py-05",onClick:function(e){t.onClick(t.label)},children:t.label})}var D=function(t){var e=Object(i.useState)(!0),a=Object(h.a)(e,2),o=a[0],s=a[1],c=Object(i.useState)(null),l=Object(h.a)(c,2),r=l[0],d=l[1],b=t.tasklist.slice(),j=t.updateTasklist;Object(i.useEffect)((function(){b.sort((function(t,e){if(t.list!==e.list)return t.list.localeCompare(e.list);switch(r){case F:return o?(null===t.date)-(null===e.date)||new Date(t.date)-new Date(e.date):(null===e.date)-(null===t.date)||new Date(e.date)-new Date(t.date);case k:return o?t.name.localeCompare(e.name):e.name.localeCompare(t.name);case g:return o?(0===t.priority)-(0===e.priority)||t.priority-e.priority:(0===e.priority)-(0===t.priority)||e.priority-t.priority;case C:return o?e.isdone-t.isdone:t.isdone-e.isdone;default:return 0}})),j(b)}),[o,r,j]);var u=function(t){s(t!==r||!o),d(t)};return Object(n.jsx)("div",{children:Object(n.jsxs)("ul",{className:"sortbuttonlist",children:["Sort by:",Object(n.jsx)("li",{children:Object(n.jsx)(w,{label:"Date",onClick:u})}),Object(n.jsx)("li",{children:Object(n.jsx)(w,{label:"Name",onClick:u})}),Object(n.jsx)("li",{children:Object(n.jsx)(w,{label:"Priority",onClick:u})}),Object(n.jsx)("li",{children:Object(n.jsx)(w,{label:"Completed",onClick:u})})]})})},L="Add",E="Edit",B=function(t){Object(u.a)(a,t);var e=Object(m.a)(a);function a(t){var n;return Object(b.a)(this,a),(n=e.call(this,t)).handleTodoFormInputChange=function(t){var e=t.target,a=e.value,i=e.name,o=Object(d.a)({},n.state.todoFormState);o[i]=a,n.setState({todoFormState:o})},n.handleSubmit=function(t){var e=Object(r.a)(n.state.todos),a=Object(r.a)(n.state.collapsibleStates);if(n.state.todoFormSubmitButtonLabel===E){var i=e.findIndex((function(e){return e.id===t.id}));e[i]=t}else{var o={id:t.id,isOpen:!1};a=a.concat(o),e=e.concat(t)}n.setState({todos:e,todoFormState:n.resetTodoFormState(),todoFormSubmitButtonLabel:L,collapsibleStates:a})},n.handleCancel=function(){n.setState({todoFormState:n.resetTodoFormState(),todoFormSubmitButtonLabel:L})},n.resetTodoFormState=function(){var t=Object(d.a)({},n.state.todoFormState);return t.name="",t.date="",t.priority="",t.list="",t.description="",t.isdone=!1,t.id=1e3*Math.random(),t},n.handleSort=function(t){n.setState({todos:t})},n.todoHandler={fetch:function(t,e){var a,i=e.map((function(e){var a;return e={id:e.id,name:e.name,date:e.date_deadline,priority:e.priority,listid:e.listid,list:(a=e.listid,t.find((function(t){return t.id===a})).name),description:e.description,isdone:e.is_done,created:e.date_created}})),o=Object(r.a)(n.state.collapsibleStates),s=Object(l.a)(i);try{for(s.s();!(a=s.n()).done;){var c={id:a.value.id,isOpen:!1};o=o.concat(c)}}catch(d){s.e(d)}finally{s.f()}n.setState({todos:i,collapsibleStates:o})},collapse:function(t){var e=Object(r.a)(n.state.collapsibleStates);e.forEach((function(e){e.isOpen=t===e.id&&!e.isOpen})),n.setState({collapsibleStates:e})},delete:function(t){var e=n.state.todos.filter((function(e){return e.id!==t}));n.setState({todos:e})},complete:function(t){console.log(t);var e=Object(r.a)(n.state.todos),a=e.findIndex((function(e){return e.id===t}));e[a]=Object(d.a)(Object(d.a)({},e[a]),{},{isdone:!e[a].isdone}),console.log(e),n.setState({todos:e})},edit:function(t){n.setState({todoFormState:t,todoFormSubmitButtonLabel:E})}},n.state={todos:[],todoFormState:{name:"",date:"",priority:"",list:"",descritpion:"",isdone:!1,id:1e3*Math.random()},todoFormSubmitButtonLabel:L,collapsibleStates:[]},n}return Object(j.a)(a,[{key:"render",value:function(){return Object(n.jsx)("div",{className:"container",children:Object(n.jsxs)("div",{className:"app",children:[Object(n.jsx)("div",{className:"form",children:Object(n.jsx)(p,{submitButtonLabel:this.state.todoFormSubmitButtonLabel,todoFormState:this.state.todoFormState,onInputChange:this.handleTodoFormInputChange,onFormSubmit:this.handleSubmit,onFormCancel:this.handleCancel})}),Object(n.jsxs)("div",{className:"todo-list",children:[Object(n.jsx)(D,{tasklist:this.state.todos,updateTasklist:this.handleSort}),Object(n.jsx)(y,{todos:this.state.todos,todoHandler:this.todoHandler,collapsibleStates:this.state.collapsibleStates})]})]})})}}]),a}(o.a.Component);c.a.render(Object(n.jsx)(o.a.StrictMode,{children:Object(n.jsx)(B,{})}),document.getElementById("root"))}},[[48,1,2]]]);
//# sourceMappingURL=main.76e76847.chunk.js.map